{{ use('/yii/widgets/ListView') }}
{{ use('/yii/grid/GridView') }}
{{ use('/yii/widgets/Pjax') }}
{{ use('kartik/form/ActiveForm') }}

<div class="u-window-box-medium">
	{{ pjax_begin({'id':'registrationsList', 'enablePushState': false}) }}

	{% set form = active_form_begin({
		'id': 'speaker-registration-form',
		'method': 'GET',
		'type': 'vertical',
		'fieldConfig': {'autoPlaceholder':false, 'labelSpan': 4},
		'options': {
			'data-pjax': false
		}}) %}

	<div class="card mb-4">
		<div class="card-header">
			<h5 class="mb-0">Filter</h5>
		</div>
		<div class="card-body">
			<div class="row mb-2">
				<div class="col-sm">
					{{ form.field(filterModel, 'company').label(t('app', 'Company')) | raw }}
				</div>
				<div class="col-sm">
					{{ form.field(filterModel, 'salutation').label(t('app', 'Salutation')) | raw }}
				</div>
				<div class="col-sm">
					{{ form.field(filterModel, 'nameFirst').label(t('app', 'First name')) | raw }}
				</div>
				<div class="col-sm">
					{{ form.field(filterModel, 'nameLast').label(t('app', 'Last name')) | raw }}
				</div>
			</div>
			<div class="row mb-2">
				<div class="col-sm">
					{{ form.field(filterModel, 'email').label(t('app', 'Email')) | raw }}
				</div>
				<div class="col-sm">
					{{ form.field(filterModel, 'eventCode').dropDownList({'BGT':'BGT', 'DHK':'DHK', 'EBH':'EBH', 'FLI':'FLI', 'HTK':'HTK', 'HTW':'HTW', 'IHF':'IHF', 'SHK':'SHK', 'WBE':'WBE', 'WBN':'WBN'}, {'custom': true,  'prompt': t('app', 'Select ...' )}).label(t('app', 'Event Code')) | raw }}
				</div>
				<div class="col-sm">
					{{ form.field(filterModel, 'eventYear').label(t('app', 'Event Year')) | raw }}
				</div>
				<div class="col-sm">
					{{ form.field(filterModel, 'exported').dropDownList({0:t('app', 'No'), 1:t('app', 'Yes')}, {'custom': true}).label(t('app', 'Exported')) | raw }}
				</div>
			</div>
			<div class="row mb-2">
				<div class="col-sm">
					{{ form.field(filterModel, 'type').dropDownList({0:t('app', 'Alle'), 1:t('app', 'Teilnehmer'), 2:t('app', 'Referent'), 3:t('app', 'Partner-Teilnehmer')}, {'custom': true}).label(t('app', 'Type')) | raw }}
				</div>
				<div class="col-sm">
				</div>
				<div class="col-sm">
				</div>
				<div class="col-sm">
				</div>
			</div>
			<div class="row mb-2">
				<div class="col-sm">
					{{ html.submitButton(t('app', 'Filter'), {'class':'btn btn-primary c-button--block mr-1', 'name':'export', 'value': false}) | raw }}
				</div>
			</div>
		</div>
	</div>

	{{ grid_view_widget({
		'dataProvider': dataProvider,
		'columns': columns,
		'id': 'grid-form',
		'filterModel': searchModel,
		'filterSelector': '.cr-registration-search',
		'tableOptions': {'class':'table table-striped table-hover'},
		'rowOptions': rowOptions,
		'formatter': {
			'class': 'yii\\i18n\\Formatter',
			'nullDisplay': '',
			'dateFormat': 'dd.MM.yyyy'
		}}) | raw }}

	{{ html.submitButton(t('app', 'Export'), {'name': 'export', 'value': 'true', 'data-pjax':false , 'class':'btn btn-secondary c-button--block mr-1'}) | raw }}
	{{ html.submitButton(t('app', 'Mark as exported'), {'name': 'mark', 'value': 'true', 'data-pjax':false , 'class':'btn btn-danger c-button--block mr-1'}) | raw }}

	{{ active_form_end() }}

	{{ pjax_end() }}
</div>
